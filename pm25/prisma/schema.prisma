generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  administrator
  superadmin
  admin
  region
  province
  unit
}

model Admin {
  id       Int    @id @default(autoincrement())
  username String @unique
  password String // จะเก็บค่า hash (bcrypt)
  role     Role

  pname String?
  fname String
  lname String

  hospcode   String? // FK -> Hospcode.hospcode
  position   String?
  positionLv String?
  tel        String?
  email      String? @unique

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  hosp Hospcode? @relation(fields: [hospcode], references: [hospcode])

  @@index([hospcode])
}

model Hospcode {
  hospcode            String  @id
  hospcode_old        String?
  name_th             String?
  type                String?
  type_organizations  String?
  organizations       String?
  county              String?
  province_id         String?
  province            String?
  amphure_id          String?
  amphure             String?
  districts_id        String?
  districts           String?

  admins              Admin[]

  @@index([province])
  @@index([amphure])
  @@index([districts])
}

